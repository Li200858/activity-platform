# 🎯 立即操作步骤（基于你的当前情况）

## 方案A：使用现有域名 `hwartplatform.org`（推荐）

你已经有了 `hwartplatform.org`，可以直接使用！

### 步骤1：进入域名DNS设置（1分钟）

1. 在Cloudflare Dashboard，点击你的域名 `hwartplatform.org`
2. 点击左侧菜单的 **"DNS"** → **"Records"**

### 步骤2：添加前端DNS记录（2分钟）

点击 **"Add record"**，添加：

```
类型: CNAME
名称: www
目标: activity-registration-frontend.onrender.com
代理状态: 🟠 已代理（橙色云朵）← 这个很重要！
TTL: 自动
```

点击 **"Save"**

### 步骤3：添加后端API DNS记录（2分钟）

再次点击 **"Add record"**，添加：

```
类型: CNAME
名称: api
目标: activity-registration-backend.onrender.com
代理状态: 🟠 已代理（橙色云朵）← 这个很重要！
TTL: 自动
```

点击 **"Save"**

**⚠️ 重要**：确保两个记录的代理状态都是 **橙色云朵**（🟠），不是灰色云朵（⚪）

### 步骤4：配置SSL/TLS（1分钟）

1. 点击左侧菜单 **"SSL/TLS"**
2. 加密模式选择：**完全（Full）**
3. 滚动到底部，确保 **"Always Use HTTPS"** 已开启

### 步骤5：更新Render后端环境变量（2分钟）

1. 打开新标签页，登录 Render Dashboard
2. 找到你的后端服务（`activity-registration-backend`）
3. 进入 **"Environment"** 设置
4. 找到或添加环境变量：
   ```
   CORS_ORIGIN=https://www.hwartplatform.org,https://hwartplatform.org
   ```
5. 点击 **"Save Changes"**（会自动重新部署）

### 步骤6：更新Render前端环境变量（2分钟）

1. 在Render Dashboard，找到你的前端服务（`activity-registration-frontend`）
2. 进入 **"Environment"** 设置
3. 找到或添加环境变量：
   ```
   REACT_APP_API_URL=https://api.hwartplatform.org
   ```
4. 点击 **"Save Changes"**（会自动重新部署）

### 步骤7：等待部署完成（5-10分钟）

- 等待Render重新部署完成
- DNS传播通常需要几分钟

### 步骤8：测试访问（1分钟）

1. 访问：`https://www.hwartplatform.org`
2. 打开浏览器开发者工具（F12）→ Network标签
3. 测试登录功能，查看API请求是否通过 `api.hwartplatform.org`
4. 如果一切正常，✅ 完成！

---

## 方案B：购买新域名（如果你想用新域名）

如果你想为这个活动报名网站单独买一个域名：

### 步骤1：购买域名

1. 在Cloudflare Dashboard，点击 **"Buy a domain"** 按钮
2. 搜索你想要的域名（如：`activity-registration.com`）
3. 选择并购买

### 步骤2：按照方案A的步骤2-8操作

---

## 🔍 如何确认配置正确？

### 检查DNS记录：

1. 在Cloudflare DNS页面，你应该看到：
   ```
   www  CNAME  activity-registration-frontend.onrender.com  🟠 已代理
   api  CNAME  activity-registration-backend.onrender.com   🟠 已代理
   ```

2. 如果看到灰色云朵，点击记录右侧的云朵图标，切换为橙色

### 检查SSL证书：

1. 访问 `https://www.hwartplatform.org`
2. 如果浏览器显示🔒锁图标 = SSL正常
3. 如果显示不安全 = 等待几分钟让SSL证书生成

### 检查API连接：

1. 访问前端网站
2. 打开开发者工具（F12）→ Network
3. 查看API请求的URL，应该是 `api.hwartplatform.org`
4. 如果还是 `xxx.onrender.com`，说明前端环境变量未生效

---

## ⚠️ 常见问题

### Q1: DNS记录添加后还是灰色云朵？
A: 点击记录右侧的云朵图标，切换为橙色（已代理）

### Q2: 访问网站显示502错误？
A: 
- 检查DNS记录中的"目标"是否正确
- 确认SSL/TLS模式是"完全（Full）"
- 等待几分钟让配置生效

### Q3: 仍然需要VPN？
A:
- 清除浏览器缓存和DNS缓存
- 等待DNS传播（最多24小时）
- 使用 https://www.whatsmydns.net 检查DNS是否已传播

### Q4: CORS错误？
A:
- 确认后端 `CORS_ORIGIN` 包含你的域名
- 确认前端 `REACT_APP_API_URL` 使用 `api.hwartplatform.org`

---

## 📝 快速检查清单

完成每一步后打勾：

- [ ] DNS记录已添加（www和api）
- [ ] DNS记录代理状态是橙色云朵
- [ ] SSL/TLS模式设置为"完全（Full）"
- [ ] 后端CORS_ORIGIN已更新
- [ ] 前端REACT_APP_API_URL已更新
- [ ] Render服务已重新部署
- [ ] 网站可以访问（无需VPN）

---

## 🎉 完成后

配置完成后：
- ✅ 用户访问 `https://www.hwartplatform.org`（无需VPN）
- ✅ API通过 `https://api.hwartplatform.org`（无需VPN）
- ✅ 继续使用Render服务（无需迁移）

**预计总时间：15-20分钟**
